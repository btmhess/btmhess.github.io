---
layout: default
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Projects Portfolio</title>
  <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>

<header>
  <nav>
    <div>
      <a href="/">Home</a>
      <a href="/index.html">Projects</a>
    </div>
    <h1>My Projects Portfolio</h1>
  </nav>
</header>

<main>
  <section>
    <h2>Projects</h2>

    <!-- Sorting controls -->
    <div id="sort-controls">
      <label>Sort by: 
        <select id="sort-select">
          <option value="favorite_order">Favorites</option>
          <option value="project_date">Date</option>
          <option value="status">Status</option>
          <option value="budget">Budget</option>
        </select>
      </label>
    </div>

    <!-- Project list -->
    <div id="projects-list">
      {% assign projects = site.projects %}
      {% for project in projects %}
        {% assign project_folder = "assets/projects/" | append: project.project_slug | append: "/" %}
        {% assign project_images = site.static_files | where_exp: "f", "f.path contains project_folder" | sort: "path" %}
        {% if project_images.size > 0 %}
          {% assign thumbnail = project_images[0].name %}
        {% else %}
          {% assign thumbnail = "" %}
        {% endif %}

        <div class="project-card" 
             data-favorite_order="{{ project.favorite_order }}" 
             data-project_date="{{ project.project_date }}" 
             data-status="{{ project.status }}" 
             data-budget="{{ project.budget }}" 
             data-project_slug="{{ project.project_slug }}"
             data-thumbnail="{{ thumbnail }}">
          <a href="{{ project.url }}">
            <!-- Thumbnail img will be filled by JS -->
            <img class="project-thumb" alt="{{ project.title }} thumbnail">
            <h3>{{ project.title }}</h3>
          </a>
          <p>{{ project.goal }}</p>
        </div>
      {% endfor %}
    </div>
  </section>
</main>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const container = document.getElementById("projects-list");
  const cards = Array.from(container.querySelectorAll(".project-card"));

  // Automatically fill thumbnails
  cards.forEach(card => {
    const imgEl = card.querySelector("img.project-thumb");
    const slug = card.dataset.project_slug;
    const thumb = card.dataset.thumbnail;
    if (thumb && thumb !== "") {
      imgEl.src = "/assets/projects/" + slug + "/" + thumb;
      imgEl.alt = card.querySelector("h3").textContent + " thumbnail";
    } else {
      imgEl.src = "/assets/img/default-thumbnail.png"; // fallback
    }
  });

  // Sorting functionality
  const select = document.getElementById("sort-select");

  function sortProjects(key) {
    const sorted = cards.slice().sort((a, b) => {
      let valA = a.dataset[key];
      let valB = b.dataset[key];

      // Dates: convert YYYY-MM to comparable numbers
      if (key === "project_date") {
        valA = valA.replace("-", "");
        valB = valB.replace("-", "");
      }

      // Numeric sort
      if (!isNaN(valA) && !isNaN(valB)) {
        return parseFloat(valA) - parseFloat(valB);
      }

      // Text sort
      return valA.localeCompare(valB);
    });

    sorted.forEach(card => container.appendChild(card));
  }

  // Initial sort by favorites
  sortProjects("favorite_order");

  select.addEventListener("change", e => sortProjects(e.target.value));
});
</script>

</body>
</html>
