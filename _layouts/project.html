---
layout: default
---

<h1>{{ page.title }}</h1>

<p><strong>Goal:</strong> {{ page.goal }}</p>

<h2>Requirements</h2>
<p>{{ page.requirements }}</p>

<h2>Result / Current Incarnation</h2>
<p>{{ page.result }}</p>

<h2>Specifications</h2>
<p>{{ page.specifications }}</p>

<h2>Gallery</h2>
<div class="gallery">
  {% assign project_folder = "_projects/" | append: page.project_slug | append: "/" %}

  {% assign project_images = site.static_files | where_exp: "f", "f.path contains project_folder" %}
  {% assign project_images = project_images | sort: "path" %}

  {% for file in project_images %}
    {% if file.extname == ".jpg" or file.extname == ".jpeg" or file.extname == ".png" or file.extname == ".webp" %}
      <img src="{{ file.url }}" alt="">
    {% endif %}
  {% endfor %}
</div>

<h2>Materials / Parts List</h2>
<div id="materials-table">
  <em>Loading materials listâ€¦</em>
</div>

<script>
(async function () {
  const container = document.getElementById("materials-table");
  const projectSlug = "{{ page.project_slug }}";
  const csvUrl = "/projects/" + projectSlug + "/materials.csv";

  try {
    const response = await fetch(csvUrl);
    if (!response.ok) throw new Error("No materials.csv found");

    const text = await response.text();
    const rows = text.trim().split("\n").map(r => r.split(","));

    const table = document.createElement("table");
    const thead = document.createElement("thead");
    const tbody = document.createElement("tbody");

    // Header
    const headerRow = document.createElement("tr");
    rows[0].forEach(h => {
      const th = document.createElement("th");
      th.textContent = h.trim();
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);

    // Body
    rows.slice(1).forEach(row => {
      const tr = document.createElement("tr");
      row.forEach(cell => {
        const td = document.createElement("td");
        td.textContent = cell.trim();
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });

    table.appendChild(thead);
    table.appendChild(tbody);

    container.innerHTML = "";
    container.appendChild(table);
  } catch (err) {
    container.innerHTML = "<em>No materials list available.</em>";
    console.warn("Materials table load failed:", err);
  }
})();
</script>

<h2>Related Projects</h2>
<ul>
  {% for r in page.related %}
    <li><a href="{{ r.url }}">{{ r.title }}</a></li>
  {% endfor %}
</ul>
